{"ast":null,"code":"import { all, put, takeEvery, call } from 'redux-saga/effects';\nimport { spotifyApi } from '../../api';\n\nfunction* getAlbuns(action) {\n  const {\n    token\n  } = action.payload;\n  const config = {\n    headers: {\n      Authorization: token\n    }\n  };\n  const response = yield call(spotifyApi.get, '/recommendations?seed_genres=metal', config);\n  const x = response.data.tracks.map(x => {\n    return {\n      name: x.album.name\n    };\n  });\n  console.log(response.data);\n  yield put({\n    type: \"spotify/GET_ALBUNS\",\n    payload: {\n      albuns: response.data\n    }\n  });\n}\n\nexport default function* spotifySaga() {\n  yield all([takeEvery('@spotify/GET_ALBUNS', getAlbuns)]);\n}","map":{"version":3,"sources":["/home/reis/Documentos/programacao/react/metal-spotify/app/src/store/spotify/saga.ts"],"names":["all","put","takeEvery","call","spotifyApi","getAlbuns","action","token","payload","config","headers","Authorization","response","get","x","data","tracks","map","name","album","console","log","type","albuns","spotifySaga"],"mappings":"AACA,SAASA,GAAT,EAAcC,GAAd,EAAmBC,SAAnB,EAA8BC,IAA9B,QAAyC,oBAAzC;AAEA,SAASC,UAAT,QAA2B,WAA3B;;AAiBA,UAAUC,SAAV,CAAoBC,MAApB,EAAsC;AAElC,QAAM;AAAEC,IAAAA;AAAF,MAAYD,MAAM,CAACE,OAAzB;AAEA,QAAMC,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAE;AAACC,MAAAA,aAAa,EAAEJ;AAAhB;AADE,GAAf;AAGA,QAAMK,QAAmB,GAAG,MAAMT,IAAI,CAACC,UAAU,CAACS,GAAZ,EAClC,oCADkC,EAElCJ,MAFkC,CAAtC;AAKE,QAAMK,CAAC,GAAGF,QAAQ,CAACG,IAAT,CAAcC,MAAd,CAAqBC,GAArB,CAA0BH,CAAD,IAAa;AAC5C,WAAO;AACHI,MAAAA,IAAI,EAAEJ,CAAC,CAACK,KAAF,CAAQD;AADX,KAAP;AAKH,GANS,CAAV;AAQFE,EAAAA,OAAO,CAACC,GAAR,CAAYT,QAAQ,CAACG,IAArB;AACA,QAAMd,GAAG,CAAC;AAACqB,IAAAA,IAAI,EAAE,oBAAP;AAA6Bd,IAAAA,OAAO,EAAE;AAAEe,MAAAA,MAAM,EAAEX,QAAQ,CAACG;AAAnB;AAAtC,GAAD,CAAT;AAGH;;AAGD,eAAe,UAAUS,WAAV,GAAuB;AAClC,QAAMxB,GAAG,CAAC,CACNE,SAAS,CAAC,qBAAD,EAAwBG,SAAxB,CADH,CAAD,CAAT;AAIH","sourcesContent":["import { AnyAction } from '@reduxjs/toolkit'\nimport { all, put, takeEvery, call} from 'redux-saga/effects'\n\nimport { spotifyApi } from '../../api'\n\n\ninterface Itracks {\n    album: {\n        name:string;\n        href:string;\n        images: string[];\n    }\n}\ninterface IResponse {\n    data: {\n       tracks: Itracks[]\n    }\n}\n\n\nfunction* getAlbuns(action: AnyAction){\n\n    const { token } = action.payload;\n\n    const config = {\n        headers: {Authorization: token }\n    }\n    const response: IResponse = yield call(spotifyApi.get,\n        '/recommendations?seed_genres=metal',\n        config\n        )\n\n      const x = response.data.tracks.map((x:Itracks)=>{\n          return {\n              name: x.album.name,\n              \n\n          }\n      })  \n\n    console.log(response.data)\n    yield put({type: \"spotify/GET_ALBUNS\", payload: { albuns: response.data}})\n\n\n}\n\n\nexport default function* spotifySaga(){\n    yield all([\n        takeEvery('@spotify/GET_ALBUNS', getAlbuns),\n       \n    ])\n}\n"]},"metadata":{},"sourceType":"module"}