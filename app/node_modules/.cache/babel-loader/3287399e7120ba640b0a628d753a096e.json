{"ast":null,"code":"import { all, put, takeEvery, call } from 'redux-saga/effects';\nimport { spotifyApi } from '../../api';\n\nfunction* getAlbuns(action) {\n  const {\n    token\n  } = action.payload;\n  const config = {\n    headers: {\n      Authorization: token\n    }\n  };\n  const response = yield call(spotifyApi.get, '/recommendations?seed_genres=metal', config);\n  console.log(response.data);\n  yield put({\n    type: \"spotify/GET_ALBUNS\",\n    payload: {\n      albuns: response.data\n    }\n  });\n}\n\nexport default function* spotifySaga() {\n  yield all([takeEvery('@spotify/GET_ALBUNS', getAlbuns)]);\n}","map":{"version":3,"sources":["/home/reis/Documentos/programacao/react/metal-spotify/app/src/store/spotify/saga.ts"],"names":["all","put","takeEvery","call","spotifyApi","getAlbuns","action","token","payload","config","headers","Authorization","response","get","console","log","data","type","albuns","spotifySaga"],"mappings":"AACA,SAASA,GAAT,EAAcC,GAAd,EAAmBC,SAAnB,EAA8BC,IAA9B,QAAyC,oBAAzC;AAEA,SAASC,UAAT,QAA2B,WAA3B;;AAUA,UAAUC,SAAV,CAAoBC,MAApB,EAAsC;AAElC,QAAM;AAAEC,IAAAA;AAAF,MAAYD,MAAM,CAACE,OAAzB;AAEA,QAAMC,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAE;AAACC,MAAAA,aAAa,EAAEJ;AAAhB;AADE,GAAf;AAGA,QAAMK,QAAmB,GAAG,MAAMT,IAAI,CAACC,UAAU,CAACS,GAAZ,EAClC,oCADkC,EAElCJ,MAFkC,CAAtC;AAOAK,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACI,IAArB;AACA,QAAMf,GAAG,CAAC;AAACgB,IAAAA,IAAI,EAAE,oBAAP;AAA6BT,IAAAA,OAAO,EAAE;AAAEU,MAAAA,MAAM,EAAEN,QAAQ,CAACI;AAAnB;AAAtC,GAAD,CAAT;AAGH;;AAGD,eAAe,UAAUG,WAAV,GAAuB;AAClC,QAAMnB,GAAG,CAAC,CACNE,SAAS,CAAC,qBAAD,EAAwBG,SAAxB,CADH,CAAD,CAAT;AAIH","sourcesContent":["import { AnyAction } from '@reduxjs/toolkit'\nimport { all, put, takeEvery, call} from 'redux-saga/effects'\n\nimport { spotifyApi } from '../../api'\n\n\ninterface IResponse {\n    data: {\n        display_name:string;\n    }\n}\n\n\nfunction* getAlbuns(action: AnyAction){\n\n    const { token } = action.payload;\n\n    const config = {\n        headers: {Authorization: token }\n    }\n    const response: IResponse = yield call(spotifyApi.get,\n        '/recommendations?seed_genres=metal',\n        config\n        )\n\n        \n\n    console.log(response.data)\n    yield put({type: \"spotify/GET_ALBUNS\", payload: { albuns: response.data}})\n\n\n}\n\n\nexport default function* spotifySaga(){\n    yield all([\n        takeEvery('@spotify/GET_ALBUNS', getAlbuns),\n       \n    ])\n}\n"]},"metadata":{},"sourceType":"module"}