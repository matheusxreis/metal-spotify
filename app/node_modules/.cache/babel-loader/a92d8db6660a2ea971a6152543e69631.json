{"ast":null,"code":"import { all, put, takeEvery, call } from 'redux-saga/effects';\nimport { api } from '../../api';\n\nfunction* signIn() {\n  yield console.log('aaaaaaa');\n  yield window.location.href = 'http://localhost:8080/auth/login';\n  yield put({\n    type: 'auth/SIGN_IN'\n  });\n}\n\nexport function* signOut() {\n  // yield call(\n  //     api.get,\n  //     '/auth/signout'\n  // )\n  yield put({\n    type: \"auth/SIGN_OUT\"\n  });\n}\n\nfunction* getToken() {\n  const response = yield call(api.post, '/auth/token');\n  const token = `Bearer ${response.data}`;\n  yield put({\n    type: \"auth/GET_TOKEN\",\n    payload: token\n  });\n  yield put({\n    type: \"@user/GET_USER_INFO\",\n    payload: {\n      token\n    }\n  }); // const config = {\n  //     headers: {Authorization : token}\n  // }\n  // const responseUser: IResponse = yield call(\n  //     axios.get,\n  //     'https://api.spotify.com/v1/me',\n  //     config\n  // )\n  // console.log(responseUser)\n}\n\nexport default function* authSaga() {\n  yield all([takeEvery('@auth/SIGN_IN', signIn), takeEvery('@auth/GET_TOKEN', getToken), takeEvery('@auth/SIGN_OUT', signOut)]);\n}","map":{"version":3,"sources":["/home/reis/Documentos/programacao/react/metal-spotify/app/src/store/auth/saga.ts"],"names":["all","put","takeEvery","call","api","signIn","console","log","window","location","href","type","signOut","getToken","response","post","token","data","payload","authSaga"],"mappings":"AAAA,SAASA,GAAT,EAAcC,GAAd,EAAmBC,SAAnB,EAA8BC,IAA9B,QAA+C,oBAA/C;AAGA,SAASC,GAAT,QAAmB,WAAnB;;AASA,UAAUC,MAAV,GAAkB;AAEf,QAAMC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAN;AACA,QAAMC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAsB,kCAA5B;AAEA,QAAMT,GAAG,CAAC;AAACU,IAAAA,IAAI,EAAE;AAAP,GAAD,CAAT;AAGF;;AAGD,OAAO,UAAUC,OAAV,GAAmB;AAEtB;AACA;AACA;AACA;AAEA,QAAMX,GAAG,CAAC;AACNU,IAAAA,IAAI,EAAE;AADA,GAAD,CAAT;AAGH;;AAED,UAAUE,QAAV,GAAoB;AAChB,QAAMC,QAAkB,GAAG,MAAMX,IAAI,CACjCC,GAAG,CAACW,IAD6B,EAEjC,aAFiC,CAArC;AAKA,QAAMC,KAAK,GAAI,UAASF,QAAQ,CAACG,IAAK,EAAtC;AAEA,QAAMhB,GAAG,CAAC;AAACU,IAAAA,IAAI,EAAE,gBAAP;AAAyBO,IAAAA,OAAO,EAAEF;AAAlC,GAAD,CAAT;AAEA,QAAMf,GAAG,CAAC;AAACU,IAAAA,IAAI,EAAE,qBAAP;AAA8BO,IAAAA,OAAO,EAAE;AAAEF,MAAAA;AAAF;AAAvC,GAAD,CAAT,CAVgB,CAWhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;;AAID,eAAe,UAAUG,QAAV,GAAoB;AAC/B,QAAMnB,GAAG,CAAC,CACNE,SAAS,CAAC,eAAD,EAAkBG,MAAlB,CADH,EAENH,SAAS,CAAC,iBAAD,EAAoBW,QAApB,CAFH,EAGNX,SAAS,CAAC,gBAAD,EAAmBU,OAAnB,CAHH,CAAD,CAAT;AAKH","sourcesContent":["import { all, put, takeEvery, call, take} from 'redux-saga/effects'\nimport { push } from 'react-router-redux'\n\nimport { api }from '../../api'\n\nimport axios from 'axios'\n\ninterface IResponse {\n    data: {\n        access_token:string;\n    }\n}\nfunction* signIn(){\n\n   yield console.log('aaaaaaa')\n   yield window.location.href= 'http://localhost:8080/auth/login'\n\n   yield put({type: 'auth/SIGN_IN'})\n\n   \n}\n\n\nexport function* signOut(){\n\n    // yield call(\n    //     api.get,\n    //     '/auth/signout'\n    // )\n\n    yield put({\n        type: \"auth/SIGN_OUT\"\n    })\n}\n\nfunction* getToken(){\n    const response:IResponse = yield call(\n        api.post, \n        '/auth/token'\n    )\n\n    const token = `Bearer ${response.data}`\n        \n    yield put({type: \"auth/GET_TOKEN\", payload: token})\n\n    yield put({type: \"@user/GET_USER_INFO\", payload: { token }})\n    // const config = {\n    //     headers: {Authorization : token}\n    // }\n    // const responseUser: IResponse = yield call(\n    //     axios.get,\n    //     'https://api.spotify.com/v1/me',\n    //     config\n    // )\n    // console.log(responseUser)\n}\n\n\n\nexport default function* authSaga(){\n    yield all([\n        takeEvery('@auth/SIGN_IN', signIn),\n        takeEvery('@auth/GET_TOKEN', getToken),\n        takeEvery('@auth/SIGN_OUT', signOut)\n    ])\n}"]},"metadata":{},"sourceType":"module"}