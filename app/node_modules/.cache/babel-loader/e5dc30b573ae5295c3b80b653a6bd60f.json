{"ast":null,"code":"import { all, takeEvery, call } from 'redux-saga/effects';\nimport { spotifyApi } from '../../api';\nexport function* getUserInfo(action) {\n  const {\n    token\n  } = action.payload;\n  const config = {\n    headers: {\n      Authorization: token\n    }\n  };\n  const response = yield call(spotifyApi.get, '/me', config);\n  console.log(response.data);\n  const user = {\n    username: response.data.display_name\n  };\n}\nexport default function* userSaga() {\n  yield all([takeEvery('@user/GET_USER_INFO', getUserInfo)]);\n}","map":{"version":3,"sources":["/home/reis/Documentos/programacao/react/metal-spotify/app/src/store/user/saga.ts"],"names":["all","takeEvery","call","spotifyApi","getUserInfo","action","token","payload","config","headers","Authorization","response","get","console","log","data","user","username","display_name","userSaga"],"mappings":"AACA,SAASA,GAAT,EAAmBC,SAAnB,EAA8BC,IAA9B,QAAyC,oBAAzC;AAEA,SAASC,UAAT,QAA2B,WAA3B;AASA,OAAO,UAAUC,WAAV,CAAsBC,MAAtB,EAAwC;AAE3C,QAAM;AAAEC,IAAAA;AAAF,MAAYD,MAAM,CAACE,OAAzB;AACA,QAAMC,MAAM,GAAG;AACRC,IAAAA,OAAO,EAAE;AAACC,MAAAA,aAAa,EAAGJ;AAAjB;AADD,GAAf;AAKA,QAAMK,QAAmB,GAAG,MAAMT,IAAI,CAClCC,UAAU,CAACS,GADuB,EAElC,KAFkC,EAGlCJ,MAHkC,CAAtC;AAMAK,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACI,IAArB;AAEA,QAAMC,IAAI,GAAG;AACTC,IAAAA,QAAQ,EAAEN,QAAQ,CAACI,IAAT,CAAcG;AADf,GAAb;AAKH;AAGD,eAAe,UAAUC,QAAV,GAAoB;AAC/B,QAAMnB,GAAG,CAAC,CACNC,SAAS,CAAC,qBAAD,EAAwBG,WAAxB,CADH,CAAD,CAAT;AAIH","sourcesContent":["import { AnyAction } from '@reduxjs/toolkit'\nimport { all, put, takeEvery, call} from 'redux-saga/effects'\n\nimport { spotifyApi } from '../../api'\n\n\ninterface IResponse {\n    data: {\n        display_name:string;\n    }\n}\n\nexport function* getUserInfo(action: AnyAction){\n\n    const { token } = action.payload\n    const config = {\n           headers: {Authorization : token}\n         }\n\n         \n    const response: IResponse = yield call(\n        spotifyApi.get,\n        '/me',\n        config  \n         )\n\n    console.log(response.data)\n\n    const user = {\n        username: response.data.display_name\n    }\n\n    \n}\n\n\nexport default function* userSaga(){\n    yield all([\n        takeEvery('@user/GET_USER_INFO', getUserInfo),\n       \n    ])\n}\n"]},"metadata":{},"sourceType":"module"}